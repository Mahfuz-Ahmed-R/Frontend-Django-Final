<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>User Profile - Fabrilife.com</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
      integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="stylesProfile.css" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container-fluid">
        <!-- Brand -->
        <a class="navbar-brand" href="index.html">
          <img
            src="https://via.placeholder.com/100x30?text=FOREVER."
            alt="Brand Logo"
            style="max-height: 30px"
          />
        </a>
        <!-- Navbar links -->
        <div class="collapse navbar-collapse justify-content-center">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link active" href="index.html">HOME</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="collections.html">COLLECTION</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="about.html">ABOUT</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="contact.html">CONTACT</a>
            </li>
          </ul>
        </div>
        <!-- Icons and Search -->
        <div class="d-flex align-items-center">
          <button id="search-icon" class="btn btn-link p-0 me-3">
            <i class="fa-solid fa-search" style="font-size: 1.5rem"></i>
          </button>
          <div id="search-box" class="d-none">
            <input type="text" class="form-control" placeholder="Search" />
          </div>
          <div class="dropdown">
            <button
              class="btn btn-secondary dropdown-toggle"
              type="button"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              <i class="fa-solid fa-user" style="font-size: 1.5rem"></i>
            </button>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="profile.html">Profile</a></li>
              <li><a class="dropdown-item" href="myOrders.html">My Orders</a></li>
              <li><button class="dropdown-item" onclick="handleLogout()">Logout</button></li>
            </ul>
          </div>
          <button class="btn btn-link p-0">
            <a href="cart.html"><i class="fa-solid fa-cart-shopping" style="font-size: 1.5rem"></i></a>
            
          </button>
        </div>
      </div>
    </nav>
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-md-8">
          <div class="profile-container" id="profile-container">

            <!-- <div class="text-center">
              <button class="btn btn-edit-profile">Edit Profile</button>
            </div> -->
          </div>
        </div>
      </div>
    </div>
    <footer class="footer">
      <div class="container">
        <div class="row">
          <div class="col-md-6 col-lg-6 footer-section">
            <div class="footer-logo">FOREVER<span>.</span></div>
            <p class="footer-text" style="width: 80%">
              Lorem ipsum is simply dummy text of the printing and typesetting
              industry. Lorem Ipsum has been the industry's standard dummy text
              ever since the 1500s, when an unknown printer took a galley of
              type and scrambled it to make a type specimen book.
            </p>
          </div>
          <div class="col-md-6 col-lg-3 footer-section">
            <h4>COMPANY</h4>
            <ul class="footer-links">
              <li><a href="index.html">Home</a></li>
              <li><a href="about.html">About us</a></li>
              <li><a href="contact.html">Contact</a></li>
              <li><a href="privacy.html">Privacy policy</a></li>
            </ul>
          </div>
          <div class="col-md-6 col-lg-3 footer-section">
            <h4>GET IN TOUCH</h4>
            <div class="footer-contact">
              <p>+1-212-456-7890</p>
              <p>contact@foreveryou.com</p>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="scripts.js"></script>
    <script>
      const loadUser = () => {
        const user_id = localStorage.getItem('user_id');
        if (!user_id) {
          console.error('User ID not found in localStorage');
          return;
        }
    
        fetch(`https://django-final-n0lr.onrender.com/customer/${user_id}`)
          .then(res => {
            if (!res.ok) {
              throw new Error('Network response was not ok');
            }
            return res.json();
          })
          .then(data => {
            const parent = document.getElementById('profile-container');
            parent.innerHTML = `
              <div class="profile-header">
                <img
                  src="https://via.placeholder.com/80"
                  alt="Profile Picture"
                  class="profile-avatar"
                />
                <h2 class="profile-name">${data.name}</h2>
                <p class="profile-email">${data.email}</p>
              </div>
    
              <div class="profile-section">
                <h3>Personal Information</h3>
                <div class="profile-info">
                  <p><i class="fas fa-user"></i> Full Name: ${data.name}</p>
                  <p>
                    <i class="fas fa-envelope"></i> Email: ${data.email}
                  </p>
                </div>
              </div>
            `;
            console.log(data);
          })
          .catch(error => {
            console.error('There was a problem with the fetch operation:', error);
          });
      };
    
      // Call the function to load user data when the script is executed
      loadUser();
    </script>
  </body>
</html>
